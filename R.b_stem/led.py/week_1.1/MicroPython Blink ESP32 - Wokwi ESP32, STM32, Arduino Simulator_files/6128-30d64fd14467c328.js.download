(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6128],{2026:function(e,t,n){"use strict";let i;n.d(t,{p:function(){return $},r:function(){return X}});var r=n(85893),o=n(63764),l=n(86010),s=n(68949),a=n(46670),c=n(67294),d=n(95879),u=n(43714),h=n(20154),p=n(29373),m=n(19940),x=n(52178),g=n(66699),f=n.n(g),j=n(75766),v=n(95582),w=n.n(v);class b{attachToModel(e,t){this.debuggers.set(e,t);let n=(0,s.EH)(()=>{this.updateBreakpointDecorations(e,t)});e.onDidChangeAttached(()=>{e.isAttachedToEditor()&&setTimeout(()=>this.updateBreakpointDecorations(e,t),0)}),e.onWillDispose(n)}supportsBreakpoints(e){return e.endsWith(".ino")||e.endsWith(".h")||e.endsWith(".c")||e.endsWith(".cpp")||e.endsWith(".rs")}lineRange(e,t){let n=e.getLineFirstNonWhitespaceColumn(t);return e.validateRange(new this.monacoGlobal.Range(t,n,t,n+1))}updateBreakpointDecorations(e,t){var n;let{OverviewRulerLane:i}=this.monacoGlobal.editor,r=null!==(n=this.modelDecorations.get(e))&&void 0!==n?n:[],{activeLine:o}=t,s=t.breakpoints.map(t=>{let n=o===t.lineNumber;return{range:this.lineRange(e,t.lineNumber),options:{description:"breakpoint-decoration",isWholeLine:!0,glyphMarginClassName:n?(0,l.default)("codicon-debug-stackframe",w().stackframe):(0,l.default)("codicon-debug-breakpoint",w().breakpoint),glyphMarginHoverMessage:{value:"Breakpoint"},overviewRuler:{color:"#6a5aff",position:i.Left}}}});o&&s.push({range:this.lineRange(e,o),options:{description:"debugger-frame-decoration",isWholeLine:!0,className:w().stackframeLine}}),this.modelDecorations.set(e,this.editor.deltaDecorations(r,s))}setBreakpointHintDecoration(e){let{TrackedRangeStickiness:t}=this.monacoGlobal.editor;this.currentHintDecoration=this.editor.deltaDecorations(this.currentHintDecoration,e?[{range:{startLineNumber:e,startColumn:1,endLineNumber:e,endColumn:1},options:{glyphMarginClassName:(0,l.default)("codicon-debug-hint",w().hint),stickiness:t.NeverGrowsWhenTypingAtEdges}}]:[])}constructor(e,t){(0,j._)(this,"monacoGlobal",void 0),(0,j._)(this,"editor",void 0),(0,j._)(this,"currentHintDecoration",void 0),(0,j._)(this,"debuggers",void 0),(0,j._)(this,"modelDecorations",void 0),this.monacoGlobal=e,this.editor=t,this.currentHintDecoration=[],this.debuggers=new WeakMap,this.modelDecorations=new WeakMap,t.onMouseMove(n=>{let i=null,r=t.getModel(),{MouseTargetType:o}=e.editor;r&&this.debuggers.get(r)&&n.target.position&&(n.target.type===o.GUTTER_GLYPH_MARGIN||n.target.type===o.GUTTER_LINE_NUMBERS)&&!n.target.detail.isAfterLines&&(i=n.target.position.lineNumber),this.setBreakpointHintDecoration(i)}),t.onMouseLeave(()=>{this.setBreakpointHintDecoration(null)}),t.onMouseDown(n=>{let{MouseTargetType:i}=e.editor,r=t.getModel(),o=r?this.debuggers.get(r):null;if(!n.target.position||!o||n.target.type!==i.GUTTER_GLYPH_MARGIN||n.target.detail.isAfterLines)return;let{lineNumber:l}=n.target.position;o.breakpoints.find(e=>e.lineNumber===l)?o.removeBreakpoint(l):o.setBreakpoint(l)})}}var y=n(39355),Z=n(51797),k=n(46761),C=n(72428),_=n(23132),S=n(58703),D=n(46901),P=n(25464),E=n(18972),M=n(48885),T=n(59334),N=n(11140),F=n(93480),I=n(87863),z=n(11057),W=n(50657),A=n(31425),H=n(6514),B=n(37645),L=n(61903);function R(e){let{open:t,validateName:n,onClose:i,onSubmit:o}=e,[l,s]=(0,c.useState)(""),[a,d]=(0,c.useState)(null),u=()=>{a||(l&&o(l),i())};return(0,r.jsx)(W.Z,{open:t,onClose:i,"aria-labelledby":"form-dialog-title",fullWidth:!0,maxWidth:"xs",children:(0,r.jsxs)("form",{onSubmit:e=>{u(),e.preventDefault()},children:[(0,r.jsx)(B.Z,{id:"form-dialog-title",children:"Create a new file"}),(0,r.jsx)(H.Z,{sx:{minHeight:"96px"},children:(0,r.jsx)(L.Z,{autoFocus:!0,margin:"dense",label:"New file name",fullWidth:!0,value:l,onChange:e=>{let{value:t}=e.target;s(t),d(t?n(t):null)},error:null!=a,helperText:a})}),(0,r.jsxs)(A.Z,{children:[(0,r.jsx)(z.Z,{onClick:i,children:"Cancel"}),(0,r.jsx)(z.Z,{onClick:u,color:"primary",variant:"contained",disabled:null!=a,children:"Create"})]})]})})}function G(e){let{open:t,originalName:n,validateName:i,onClose:o,onRename:l}=e,[s,a]=(0,c.useState)(n),[d,u]=(0,c.useState)(null);(0,c.useEffect)(()=>{a(n)},[n]);let h=()=>{d||(s!==n&&l(s),o())};return(0,r.jsx)(W.Z,{open:t,onClose:o,"aria-labelledby":"form-dialog-title",fullWidth:!0,maxWidth:"xs",children:(0,r.jsxs)("form",{onSubmit:e=>{h(),e.preventDefault()},children:[(0,r.jsxs)(B.Z,{id:"form-dialog-title",children:['Rename "',n,'"']}),(0,r.jsx)(H.Z,{sx:{minHeight:"96px"},children:(0,r.jsx)(L.Z,{autoFocus:!0,margin:"dense",label:"New file name",fullWidth:!0,value:s,onChange:e=>{let{value:t}=e.target;a(t),u(t===n?null:i(t))},error:null!=d,helperText:d})}),(0,r.jsxs)(A.Z,{children:[(0,r.jsx)(z.Z,{onClick:o,children:"Cancel"}),(0,r.jsx)(z.Z,{onClick:h,color:"primary",variant:"contained",disabled:null!=d,children:"Rename"})]})]})})}let O=["ino","txt","h","hh","hpp","c","csv","cpp","md","json","S","py","rs","ts","bas","v"],U=["ino","h","hh","hpp","c","cpp"];function K(e){let{activeFile:t,open:n,anchorEl:i,onClose:o,onFileCreated:l}=e,s=(0,I.P)(),a=(0,c.useContext)(X),[d,u]=(0,c.useState)(!1),[h,p]=(0,c.useState)(!1),[m,x]=(0,c.useState)(!1),[g,f]=(0,c.useState)(""),{translate:j}=(0,N.q)("editor.fileMenu");function v(e){for(let t of'/<>:"\\|?*')if(e.includes(t))return j("error.invalidFileName","Invalid filename: character {{char}} is not allowed.",{char:t});return e.includes(".")&&function(e){let t=e.split(".");return O.includes(t[t.length-1])}(e)||"Cargo.toml"===e?s.files.some(t=>t.name===e)?j("error.fileExists","A file with this name already exists"):null:j("error.invalidFileType","Invalid file type. Supported file types: {{types}}",{types:O.join(", ")})}let w=async()=>{let{files:e}=await (0,F.aE)({multiple:!0,accept:O.map(e=>".".concat(e))}),t=[];for(let n of e){let e=v(n.name);null===e?s.addFile(n.name,new TextDecoder().decode(await n.arrayBuffer())):t.push("".concat(n.name,": ").concat(e))}t.length&&alert(j("error.uploadFailed","Some files could not be uploaded")+"\n\n"+t.join("\n"))};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(S.Z,{open:m,autoHideDuration:6e3,onClose:()=>{x(!1)},children:(0,r.jsx)(D.Z,{severity:"success",children:g})}),(0,r.jsxs)(P.Z,{open:n,onClose:o,onClick:o,anchorEl:i,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:[t&&function(e){let t=e.split(".");return U.includes(t[t.length-1])}(t)&&(0,r.jsxs)(E.Z,{onClick:async()=>{var e;let t=await (null===(e=a.formatCode)||void 0===e?void 0:e.call(a));x(!0),f(t?j("formatSuccessful","Code formatted successfully"):j("formatAlready","Code already formatted"))},children:[(0,r.jsx)(M.Z,{children:(0,r.jsx)(y.Z,{})}),(0,r.jsx)(T.Z,{primary:j("formatCode","Format code")})]}),t&&(0,r.jsxs)(E.Z,{onClick:()=>{p(!0)},children:[(0,r.jsx)(M.Z,{children:(0,r.jsx)(Z.Z,{fontSize:"small"})}),(0,r.jsx)(T.Z,{children:j("rename","Rename")})]}),t&&(0,r.jsxs)(E.Z,{onClick:()=>{confirm(j("confirmDelete","This will remove {{filename}}. Should I go ahead?",{filename:null!=t?t:""}))&&t&&s.removeFile(t)},children:[(0,r.jsx)(M.Z,{children:(0,r.jsx)(k.Z,{fontSize:"small"})}),(0,r.jsx)(T.Z,{children:j("delete","Delete")})]}),(0,r.jsxs)(E.Z,{onClick:()=>{u(!0)},children:[(0,r.jsx)(M.Z,{children:(0,r.jsx)(C.Z,{fontSize:"small"})}),(0,r.jsx)(T.Z,{children:j("newFile","New file...")})]}),(0,r.jsxs)(E.Z,{onClick:w,children:[(0,r.jsx)(M.Z,{children:(0,r.jsx)(_.Z,{fontSize:"small"})}),(0,r.jsx)(T.Z,{children:j("uploadFile","Upload file(s)...")})]})]}),(0,r.jsx)(R,{open:d,validateName:v,onClose:()=>u(!1),onSubmit:e=>{s.addFile(e),null==l||l(e)}}),(0,r.jsx)(G,{open:h,originalName:null!=t?t:"",validateName:v,onClose:()=>p(!1),onRename:e=>{t&&s.renameFile(t,e)}})]})}var V=JSON.parse('{"$schema":"http://json-schema.org/schema#","type":"object","required":["version","author","editor","parts","connections"],"properties":{"version":{"enum":[1]},"author":{"type":"string","title":"Author name"},"editor":{"type":"string","title":"Software used to create this file","default":"wokwi","examples":["wokwi"]},"pacman":{"type":"boolean"},"parts":{"type":"array","title":"List of parts","items":{"required":["id","type"],"properties":{"id":{"type":"string"},"type":{"enum":["board-ssd1306","wokwi-74hc165","wokwi-74hc595","wokwi-analog-joystick","wokwi-arduino-nano","wokwi-arduino-mega","wokwi-arduino-uno","wokwi-attiny85","wokwi-buzzer","wokwi-il9163","wokwi-ili9341","wokwi-dht11","wokwi-dht12","wokwi-dht22","wokwi-ds1307","wokwi-franzininho","wokwi-hc-sr04","wokwi-ir-receiver","wokwi-ky-040","wokwi-lcd1602","wokwi-lcd2004","wokwi-led","wokwi-led-bar-graph","wokwi-led-ring","wokwi-logic-analyzer","wokwi-max7219-matrix","wokwi-membrane-keypad","wokwi-microsd-card","wokwi-midi-player","wokwi-mpu6050","wokwi-neopixel","wokwi-neopixel-matrix","wokwi-neopixel-meter","wokwi-neopixel-canvas","wokwi-ntc-temperature-sensor","wokwi-servo","wokwi-tv","wokwi-photoresistor-sensor","wokwi-pi-pico","wokwi-pir-motion-sensor","wokwi-potentiometer","wokwi-pushbutton","wokwi-pushbutton-6mm","wokwi-rgb-led","wokwi-resistor","wokwi-7segment","wokwi-splendida","wokwi-slide-potentiometer","wokwi-slide-switch","wokwi-ssd1306"]},"left":{"type":"number"},"top":{"type":"number"},"rotate":{"type":"number"},"attrs":{"type":"object","additionalProperties":{"type":"string"}},"hide":{"type":"boolean","default":false}},"additionalProperties":false}},"connections":{"type":"array","title":"List of part connections","items":{"type":"array","minItems":3,"maxItems":4,"items":[{"type":"string","title":"From pin","pattern":"^.+:.+$"},{"type":"string","title":"To pin","pattern":"^.+:.+$"},{"type":"string","title":"Wire color","format":"color","examples":["black","red","green"]},{"type":"array","items":{"pattern":"^[vh]-?[0-9]+|\\\\*$","type":"string"}}],"additionalItems":false}},"serialMonitor":{"type":"object","properties":{"display":{"type":"string","enum":["always","never","auto","plotter","terminal"],"default":"auto"},"newline":{"type":"string","enum":["none","lf","cr","crlf"]}}}}}'),q=n(38643);let X=(0,c.createContext)({ready:!1,commands:{}});function Q(e,t){let{name:n,content:i}=e,r=n.toLowerCase();return n.endsWith(".chip.c")?"cpp":(0,p.PE)(n)?"arduino":r.endsWith(".json")?"json":r.endsWith(".md")?"markdown":t&&n.endsWith(".S")?"".concat(t,"-assembly"):n.endsWith(".py")?"python":n.endsWith(".rs")?"rust":n.endsWith(".bas")?"basic":n.endsWith(".js")?"javascript":n.endsWith(".ts")?"typescript":n.endsWith(".v")?"verilog":n.endsWith(".toml")?"ini":n===m.rp?i.includes("file format elf32-littlearm")?"arduino-listing-arm":"arduino-listing":"text"}let $=(0,a.Pi)(e=>{let{tabs:t,architecture:a}=e,[g,j]=(0,c.useState)(t[0]),v=!t.includes(g),w=v?t[0]:g,y=(0,c.useRef)(w),[Z,k]=(0,c.useState)(null),[C,_]=(0,c.useState)(null),[S,D]=(0,c.useState)(null),P=(0,c.useRef)(S),E=(0,c.useRef)(null),M=(0,c.useContext)(X),[T,N]=(0,c.useState)(!1),F=(0,c.useRef)(null),I=(0,c.useRef)(null),[z,W]=(0,c.useState)(!1),A=(0,u.A)(),H="1"===(0,d.Z)("wokwi-no-autocomplete"),B=(0,c.useRef)(!1),L=(0,c.useCallback)(()=>{let e=F.current;e&&(e.style.overflow="hidden",null==S||S.layout(),e.style.overflow="")},[S]);M.doLayout=L,(0,h.m)("resize",L),M.goToError=()=>{var e,n;if(null===(e=w.errors)||void 0===e||!e.length){for(let e of t)if(null===(n=e.errors)||void 0===n?void 0:n.length){j(e);return}}},M.switchToTab=e=>{let n=t.find(t=>t.name===e);n&&j(n)},(0,c.useEffect)(()=>(0,s.EH)(()=>{for(let n of t){var e;if(null===(e=n.debugger)||void 0===e?void 0:e.activeLine){j(n);return}}}),[t]),M.formatCode=async()=>{var e;let t=null==S?void 0:S.getValue();return await (null==S?void 0:null===(e=S.getAction("editor.action.formatDocument"))||void 0===e?void 0:e.run()),t!==(null==S?void 0:S.getValue())},(0,c.useEffect)(()=>{v&&j(t[0])},[v,t]);let R=(0,c.useCallback)(e=>{var t,n,i;let r=C.Uri.parse("vfs:"+e.name),o=null!==(n=C.editor.getModel(r))&&void 0!==n?n:C.editor.createModel(e.content,Q(e,a),r),l="python"===Q(e,a);o.updateOptions({tabSize:l?4:2,indentSize:l?4:2}),o.getValue()!==e.content&&o.setValue(e.content),o.onDidChangeContent(()=>{var t;return null===(t=e.update)||void 0===t?void 0:t.call(e,o.getValue())});let c=(0,s.EH)(()=>{var t;let n=P.current,i=(null==n?void 0:n.getModel())===o;C.editor.setModelMarkers(o,"Arduino",function(e,t){let n=t=>{switch(t){case"error":break;case"warning":return e.MarkerSeverity.Warning;case"note":return e.MarkerSeverity.Hint}return e.MarkerSeverity.Error};return t.map(e=>{let{type:t,...i}=e;return{severity:n(t),...i}})}(C,e.errors||[]));let r=null===(t=e.errors)||void 0===t?void 0:t.filter(e=>"note"!==e.type);i&&(null==r?void 0:r.length)&&setTimeout(()=>{var e;null==n||n.trigger(null,"closeMarkersNavigation",[]),null==n||null===(e=n.getAction("editor.action.marker.next"))||void 0===e||e.run(),null==n||n.trigger(null,"closeMarkersNavigation",[])},0)});o.onWillDispose(c);let d=e.debugger;return d&&(null==E?void 0:null===(t=E.current)||void 0===t?void 0:t.supportsBreakpoints(e.name))&&(null===(i=E.current)||void 0===i||i.attachToModel(o,d)),o},[C,a]);return(0,c.useEffect)(()=>{(i||(i=(async()=>{if(!q.y){let e=document.createElement("link");e.dataset.info="nextjs-head-issue-workaround",document.head.appendChild(e)}o._m.config({paths:{vs:"https://wokwi.com/cdn/monaco-editor/0.43.0/vs"}});let e=await o._m.init(),{registerArduinoLanguage:t,registerAVRAssemblyLanguage:i,registerAVRListingLanguage:r}=await Promise.all([n.e(8639),n.e(3118)]).then(n.bind(n,43118));return t(e),i(e),r(e),function(e){e.languages.json.jsonDefaults.setDiagnosticsOptions({validate:!0,schemas:[{uri:"https://wokwi.com/schemas/diagram-v1.json",fileMatch:["diagram.json"],schema:V}]})}(e),e})()),i).then(_)},[]),(0,c.useEffect)(()=>{let e=y.current;if(y.current=w,S&&C){var n,i;e&&t.includes(e)&&(null===(i=e.setEditorState)||void 0===i||i.call(e,{model:S.getModel(),viewState:S.saveViewState()}));let r=w.editorState;if(null==r?void 0:r.model){S.setModel(r.model);let e=S.getValue(),t=w.content;e!==t&&S.setValue(t),r.model=null}else S.setModel(R(w));(null==r?void 0:r.viewState)&&S.restoreViewState(r.viewState),S.updateOptions({tabSize:w.name.endsWith(".py")?4:2,readOnly:w.readonly||w.name===m.rp}),(null===(n=w.debugger)||void 0===n?void 0:n.activeLine)&&S.revealLineInCenter(w.debugger.activeLine),!B.current&&(!M.embedMode||document.hasFocus())&&(setTimeout(()=>S.focus(),0),B.current=!0)}},[S,w,R,C,t,M.embedMode]),(0,c.useEffect)(()=>(0,s.EH)(()=>{if(!S)return;let e=S.getModel();e&&w.content!==e.getValue()&&(S.pushUndoStop(),S.executeEdits("",[{range:e.getFullModelRange(),text:w.content}]),S.pushUndoStop())}),[w,S]),(0,c.useEffect)(()=>{if(null!=Z){let e=t.find(e=>e.name===Z);e&&(null==S||S.focus(),j(e)),k(null)}},[S,Z,t]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(x.mQ,{children:[t.map(e=>{var t;return(0,r.jsx)(x.OK,{onMouseDown:e=>e.preventDefault(),onClick:()=>j(e),active:e===w,readonly:e.readonly,modified:e.modified,errors:null===(t=e.errors)||void 0===t?void 0:t.some(e=>"error"===e.type),children:e.name},e.name)}),(0,r.jsx)(x.BX,{onClick:()=>N(!T),active:T,ref:I})]}),z&&(0,r.jsxs)("div",{children:["Characters: ",w.content.length]}),(0,r.jsx)(K,{activeFile:w.name,open:T,onClose:()=>N(!1),onFileCreated:e=>{k(e)},anchorEl:I.current}),w.customComponent,(0,r.jsxs)("div",{className:(0,l.default)(f().editorContainer,{[f().disableAutocomplete]:H,dark:A.dark}),style:{display:w.customComponent?"none":""},ref:F,children:[!C&&(0,r.jsx)("pre",{className:(0,l.default)(f().sourceCodePreview,A.dark&&f().sourceCodePreviewDark),children:(0,r.jsx)("code",{children:w.content})}),C&&(0,r.jsx)(o.ZP,{onMount:e=>{if(D(e),P.current=e,e.updateOptions({tabSize:2}),C){var t;for(let n of(E.current=new b(C,e),M.ready=!0,null===(t=M.onEditorReady)||void 0===t||t.call(M),M.onRunCode&&e.addAction({id:"run-program",label:"Compile & Run Program",keybindings:[C.KeyMod.CtrlCmd|C.KeyCode.Enter,C.KeyMod.CtrlCmd|C.KeyCode.KeyU,C.KeyMod.CtrlCmd|C.KeyCode.KeyR],run:()=>{var e;return null===(e=M.onRunCode)||void 0===e?void 0:e.call(M)}}),M.onSaveCode&&e.addAction({id:"save",label:"Save",keybindings:[C.KeyMod.CtrlCmd|C.KeyCode.KeyS],run:()=>{var e;return null===(e=M.onSaveCode)||void 0===e?void 0:e.call(M)}}),Object.keys(M.commands))){let{name:t,keybindings:i}=M.commands[n];e.addAction({id:n,label:t,keybindings:null==i?void 0:i({KeyMod:C.KeyMod,KeyCode:C.KeyCode}),run:()=>M.commands[n].callback()})}e.addAction({id:"character-counter",label:"Character Counter",run:()=>W(e=>!e)}),e.addAction({id:"select-all",label:"Select All",keybindings:[C.KeyMod.CtrlCmd|C.KeyCode.KeyA],contextMenuGroupId:"9_cutcopypaste",contextMenuOrder:5,run:e=>{var t;let n=null===(t=e.getModel())||void 0===t?void 0:t.getFullModelRange();n&&e.setSelection(n)}}),e.setModel(R(w))}},wrapperProps:{className:f().wrapper},theme:function(e,t){let n=(0,p.PE)(e)||e===m.rp?"arduino":"vs";return t?"".concat(n,"-dark"):n}(w.name,A.dark),options:{glyphMargin:!0,scrollBeyondLastLine:!M.embedMode,fontSize:A.font,minimap:{enabled:!1}}})]})]})})},64704:function(e,t,n){"use strict";n.d(t,{y:function(){return s}});var i=n(85893),r=n(99226),o=n(81458),l=n(15861);function s(e){var t;let n=Math.round(null!==(t=e.value)&&void 0!==t?t:0);return(0,i.jsxs)(r.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,i.jsx)(r.Z,{sx:{width:"100%",mr:1},children:(0,i.jsx)(o.Z,{variant:"determinate",...e})}),(0,i.jsx)(r.Z,{sx:{minWidth:35},children:(0,i.jsx)(l.Z,{variant:"body2",color:"text.secondary",children:"".concat(n,"%")})})]})}},56128:function(e,t,n){"use strict";n.d(t,{u:function(){return tB}});var i=n(85893),r=n(55317),o=n(8849),l=n.n(o),s=n(10389),a=n(59130),c=n(51797),d=n(72428),u=n(41073),h=n(34685),p=n(89022),m=n(99226),x=n(34386),g=n(58032),f=n(14564),j=n(47036),v=n(6949),w=n(13486),b=n(20025),y=n(86010),Z=n(46670),k=n(5152),C=n.n(k),_=n(67294),S=n(14680),D=n(11140),P=n(43714),E=n(88430),M=n(34951),T=n(29373),N=n(2026),F=n(40837),I=n(79044),z=n(75766),W=n(15861),A=n(11057);class H extends _.Component{static getDerivedStateFromError(){return{hasError:!0}}render(){return this.state.hasError?(0,i.jsxs)(m.Z,{px:1,pt:8,style:{background:"black",color:"white",height:"100%"},children:[(0,i.jsx)(W.Z,{variant:"h3",children:"Error in diagram.json"}),(0,i.jsx)("p",{children:"Please fix the error and click Retry:"}),(0,i.jsx)(A.Z,{onClick:()=>this.setState({hasError:!1}),color:"secondary",children:"Retry"})]}):this.props.children}constructor(...e){super(...e),(0,z._)(this,"state",{hasError:!1})}}var B=n(83624),L=n(39355),R=n(10417),G=n(83680),O=n(12215),U=n(85591),K=n(11296),V=n(88600),q=n(40404),X=n(17575),Q=n(65301),$=n(84118),Y=n(18972),J=n(48885),ee=n(59334),et=n(67720),en=n(39438),ei=n(85179),er=n(87863),eo=n(6939);let el=(0,Z.Pi)(e=>{let{onClose:t}=e,n=(0,_.useContext)(I.A),r=(0,_.useContext)(eo.D),o=(0,er.P)(),l=(0,_.useContext)(en.St),{fullScreen:s}=n,{translate:a}=(0,D.q)("diagram.menu"),{diagram:c}=o,d=c&&c.undoManager.canUndo,u=c&&c.undoManager.canRedo,h=(0,ei.p2)(),p="avr"===o.architecture;return(0,i.jsxs)($.Z,{children:[!n.isEmbeddedEditor&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(Y.Z,{disabled:!p,onClick:()=>{var e,n;r.start({debug:!0,debugger:!0,diagram:o.diagram,files:o.files,chips:o.chips,binaryFiles:o.binaryFiles,sdCardFiles:o.sdCardFiles,projectId:o.id,userId:l.id}),(0,E.c)("debugger:start",{mcu:null===(n=o.diagram)||void 0===n?void 0:null===(e=n.findMCU())||void 0===e?void 0:e.type}),t()},children:[(0,i.jsx)(J.Z,{children:(0,i.jsx)(B.Z,{})}),(0,i.jsx)(ee.Z,{children:a("debug","Debug (beta)")})]}),(0,i.jsx)(et.Z,{})]}),n.openInTextEditor&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(Y.Z,{onClick:()=>{var e;return null===(e=n.openInTextEditor)||void 0===e?void 0:e.call(n)},children:[(0,i.jsx)(J.Z,{children:(0,i.jsx)(L.Z,{})}),(0,i.jsx)(ee.Z,{children:a("openInTextEditor","Open in text editor")})]}),(0,i.jsx)(et.Z,{})]}),(0,i.jsxs)(Y.Z,{disabled:!d,onClick:()=>{null==c||c.undoManager.undo(),o.syncDiagram()},children:[(0,i.jsx)(J.Z,{children:(0,i.jsx)(R.Z,{fontSize:"small"})}),(0,i.jsx)(ee.Z,{children:a("undo","Undo")}),(0,i.jsxs)(W.Z,{variant:"body2",color:"text.secondary",children:[h,"-Z"]})]}),(0,i.jsxs)(Y.Z,{disabled:!u,onClick:()=>{null==c||c.undoManager.redo(),o.syncDiagram()},children:[(0,i.jsx)(J.Z,{children:(0,i.jsx)(G.Z,{fontSize:"small"})}),(0,i.jsx)(ee.Z,{children:a("redo","Redo")}),(0,i.jsxs)(W.Z,{variant:"body2",color:"text.secondary",children:[h,"-Y"]})]}),(0,i.jsx)(et.Z,{}),(0,i.jsxs)(Y.Z,{onClick:()=>n.fit(),children:[(0,i.jsx)(J.Z,{children:(0,i.jsx)(O.Z,{fontSize:"small"})}),(0,i.jsx)(ee.Z,{children:a("fit","Fit")}),(0,i.jsx)(W.Z,{variant:"body2",color:"text.secondary",children:"F"})]}),(0,i.jsxs)(Y.Z,{onClick:()=>n.zoom(1.1),children:[(0,i.jsx)(J.Z,{children:(0,i.jsx)(U.Z,{})}),(0,i.jsx)(ee.Z,{children:a("zoomIn","Zoom in")}),(0,i.jsx)(W.Z,{variant:"body2",color:"text.secondary",children:"+"})]}),(0,i.jsxs)(Y.Z,{onClick:()=>n.zoom(.9),children:[(0,i.jsx)(J.Z,{children:(0,i.jsx)(K.Z,{})}),(0,i.jsx)(ee.Z,{children:a("zoomOut","Zoom out")}),(0,i.jsx)(W.Z,{variant:"body2",color:"text.secondary",children:"â€“"})]}),(0,i.jsx)(et.Z,{}),(0,i.jsxs)(Y.Z,{onClick:()=>n.toggleGrid(),children:[(0,i.jsx)(J.Z,{children:(0,i.jsx)(V.Z,{fontSize:"small"})}),(0,i.jsx)(ee.Z,{children:a("toggleGrid","Toggle Grid")}),(0,i.jsx)(W.Z,{variant:"body2",color:"text.secondary",children:"G"})]}),(0,i.jsxs)(Y.Z,{onClick:()=>n.toggleFullScreen(),children:[(0,i.jsx)(J.Z,{children:s?(0,i.jsx)(q.Z,{fontSize:"small"}):(0,i.jsx)(X.Z,{fontSize:"small"})}),(0,i.jsx)(ee.Z,{children:s?a("exitFullScreen","Exit full screen"):a("fullScreen","Full screen")}),(0,i.jsx)(W.Z,{variant:"body2",color:"text.secondary",sx:{marginLeft:2},children:"Alt-Enter"})]}),(0,i.jsxs)(Y.Z,{onClick:()=>n.linkOpener("https://docs.wokwi.com/guides/diagram-editor"),children:[(0,i.jsx)(J.Z,{children:(0,i.jsx)(Q.Z,{fontSize:"small"})}),(0,i.jsx)(ee.Z,{children:a("help","Help")}),(0,i.jsx)(W.Z,{variant:"body2",color:"text.secondary",children:"?"})]})]})});var es=n(96506),ea=n(42293),ec=n(79332),ed=n(87109),eu=n(75438),eh=n(18987),ep=n(69661),em=n(58943),ex=n(36445),eg=n(68949);class ef{get chipPosition(){return this._chipPosition}get isOpen(){return this.dialogOpen}open(e){this.dialogOpen=!0,this._chipPosition=e}close(){this.dialogOpen=!1}constructor(){(0,z._)(this,"_chipPosition",{x:0,y:0}),(0,z._)(this,"dialogOpen",!1),(0,eg.ky)(this)}}let ej=(0,_.createContext)(new ef);var ev=n(51683),ew=n(76106);function eb(){let e=(0,er.P)(),t=(0,_.useRef)(null),n=(0,_.useRef)(null),r=(0,_.useContext)(I.A),o=(0,_.useContext)(ej),[l,s]=(0,_.useState)(""),{translate:a}=(0,D.q)("diagram.addPart"),c=e=>e.variant?"".concat(e.type,"-").concat(e.variant):e.type,d="logic".startsWith(l.toLowerCase())&&l.length>0,u=ew.s0.map(e=>"Logic"===e.title&&d?e:{title:e.title,items:e.items.filter(e=>a(c(e),e.label).toLowerCase().includes(l.toLowerCase()))}).filter(e=>e.items.length>0),h=t=>{let n;let i=r.diagramSafeVisibleArea,l=e.diagram;if(r.clearSelection(),l&&i){let e={x:i.left+10,y:i.top+10};for(;l.parts.find(t=>Math.abs(t.left-e.x)<ex.g5&&Math.abs(t.top-e.y)<ex.g5);)e.x+=ex.g5,e.y+=ex.g5;let t=i&&(0,ev.MU)(i);n={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y)}}if("chip"===t.type){o.open(null!=n?n:{x:0,y:0});return}if(l){var s;l.addPartFromTemplate({type:t.type,prefix:t.prefix,attrs:null!==(s=t.attrs)&&void 0!==s?s:[]},n),e.syncDiagram()}};return(0,i.jsxs)(m.Z,{minWidth:"350px",sx:{padding:2},children:[(0,i.jsx)(ea.Z,{position:"sticky",onFocus:()=>{var e;return null===(e=t.current)||void 0===e?void 0:e.focus()},children:(0,i.jsx)(ec.Z,{autoFocus:!0,ref:t,value:l,onChange:e=>s(e.target.value),onClick:e=>e.stopPropagation(),sx:{width:"100%"},onKeyDown:e=>{var t,i;if("Enter"===e.key){let n=null===(t=u[0])||void 0===t?void 0:t.items[0];n&&(h(n),e.preventDefault())}else("ArrowDown"===e.key||"ArrowUp"===e.key)&&(null===(i=n.current)||void 0===i||i.dispatchEvent(new KeyboardEvent(e.type,e.nativeEvent)),e.preventDefault())},endAdornment:(0,i.jsx)(ed.Z,{position:"end",children:(0,i.jsx)(es.Z,{})})})}),(0,i.jsx)($.Z,{ref:n,children:u.map(e=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(eu.Z,{sx:{top:"27px"},children:a("category."+(0,em.z)(e.title),e.title)}),e.items.map(e=>(0,i.jsxs)(Y.Z,{onClick:()=>h(e),children:[(0,i.jsx)(eh.Z,{children:(0,i.jsx)(ep.Z,{alt:"Avatar ".concat(c(e)),src:e.photo,sx:{width:50,height:50},variant:"square"})}),(0,i.jsx)(ee.Z,{primary:a(c(e),e.label)})]},c(e)))]}))})]})}var ey=n(90948),eZ=n(11703),ek=n(40044),eC=n(78462),e_=n(97212);function eS(){return(0,i.jsxs)(W.Z,{sx:{"text-align":"center",background:"#333",color:"white",py:.5},children:["The debugger is currently in ",(0,i.jsx)("strong",{children:"beta"}),". Please report any issues"," ",(0,i.jsx)("a",{href:"https://github.com/wokwi/wokwi-features/issues/205",target:"_blank",rel:"noreferrer",style:{color:"#aaf"},children:"here"}),"."]})}let eD=(0,Z.Pi)(()=>{let{debuggerStore:e}=(0,_.useContext)(eo.D);return(0,i.jsxs)(m.Z,{sx:{background:"black",color:"white",width:"100%",display:"flex",flexDirection:"column"},children:[(0,i.jsx)(eC.Z,{dense:!0,sx:{overflow:"auto",flex:1},children:e.callstack.map((e,t)=>(0,i.jsx)(e_.ZP,{children:(0,i.jsx)(ee.Z,{primary:"#".concat(t," ").concat(e.function,"()"),secondary:"".concat(function(e){if(!e)return"unknown file";if(e.includes(".arduino15/packages/arduino/hardware/avr")){let t=e.indexOf("/cores/arduino/");if(t>=0)return e.substring(t+1)}let t=e.split("/");return t[t.length-1]}(e.file),":").concat(e.line)})},t))}),(0,i.jsx)(eS,{})]})}),eP=(0,Z.Pi)(()=>{let{debuggerStore:e}=(0,_.useContext)(eo.D),t=e.locals.length>0,n=e.globals.length>0;return(0,i.jsxs)(m.Z,{sx:{background:"black",color:"white",width:"100%",display:"flex",flexDirection:"column"},children:[(0,i.jsxs)(eC.Z,{sx:{overflow:"auto","& ul":{padding:0}},subheader:(0,i.jsx)("li",{}),dense:!0,children:[t&&(0,i.jsx)(eu.Z,{children:"Locals"}),e.locals.map((e,t)=>(0,i.jsx)(e_.ZP,{children:(0,i.jsx)(ee.Z,{primary:"".concat(e.type," ").concat(e.name," = ").concat(e.value)})},t)),n&&(0,i.jsx)(eu.Z,{children:"Globals"}),e.globals.map((e,t)=>(0,i.jsx)(e_.ZP,{children:(0,i.jsx)(ee.Z,{primary:"".concat(e.type," ").concat(e.name," = ").concat(e.value)})},t)),!t&&!n&&(0,i.jsx)(eu.Z,{children:"No variables"})]}),(0,i.jsx)(eS,{})]})});var eE=n(13264),eM=n(61193);let eT=(0,eE.Z)("div")(e=>{let{theme:t}=e;return{position:"relative",height:1,cursor:"row-resize",backgroundColor:"rgba(120, 120, 120, 0.3)","&:before":{display:"block",content:'" "',position:"absolute",top:-5,width:"100%",height:"10px"},"&:after":{display:"block",content:'" "',position:"absolute",backgroundColor:t.palette.primary.light,top:-2,width:"100%",height:4,opacity:0},"&.dragging:after, &:hover:after":{opacity:1,transition:"opacity"}}});function eN(e){let{children:t,initialSize:n,constrain:r}=e,[o,l]=(0,_.useState)(!1),[s,a]=(0,_.useState)(n),c=r?r(s):s;return(0,i.jsxs)(m.Z,{display:"flex",flexDirection:"column",minHeight:c,flexBasis:c,children:[(0,i.jsx)(eM.DraggableCore,{onStart:()=>l(!0),onDrag:(e,t)=>{a(e=>e-t.deltaY)},onStop:()=>l(!1),children:(0,i.jsx)(eT,{className:o?"dragging":""})}),t]})}var eF=n(87918),eI=n(190),ez=n(1348),eW=n.n(ez);let eA=(0,Z.Pi)(e=>{let{lines:t,onClear:n}=e,[o,s]=(0,_.useState)(!0),a=(0,_.useRef)(null),[c]=(0,_.useState)(function(){let e=(0,eI.N)().font;return e?{fontSize:e+"px"}:{}}());return(0,_.useEffect)(()=>{o&&a.current&&(a.current.scrollTop=a.current.scrollHeight)},[t.length,o]),(0,i.jsxs)("div",{className:eW().serialMonitor,children:[(0,i.jsx)("div",{className:eW().monitorContainer,children:(0,i.jsx)("pre",{className:"notranslate",onScroll:e=>{let t=e.currentTarget,n=t.scrollHeight-t.scrollTop-t.clientHeight;n>32?s(!1):t.scrollTop>0&&n<1&&s(!0)},style:c,ref:a,children:t.map((e,t)=>(0,i.jsxs)("div",{children:[(0,i.jsx)(eF.Z,{label:e.chip,size:"small",color:"secondary"}),"\xa0",e.message]},t))})}),(0,i.jsxs)(m.Z,{position:"absolute",bottom:"0",right:"24px",children:[(0,i.jsx)("button",{onClick:()=>s(!o),title:"Auto scroll",children:(0,i.jsx)(l(),{path:o?r.Wa1:r._86,size:1})}),(0,i.jsx)("button",{onClick:()=>null==n?void 0:n(),children:(0,i.jsx)(l(),{path:r.QGK,size:1})})]})]})});var eH=n(99773),eB=n.n(eH),eL=n(47142),eR=n.n(eL);let eG=[{strokeStyle:{g:255},lineWidth:4},{strokeStyle:{g:165,r:255},lineWidth:4},{strokeStyle:{r:255,b:255},lineWidth:4},{strokeStyle:{g:255,b:255},lineWidth:4},{strokeStyle:{g:255,r:255},lineWidth:4},{strokeStyle:{g:255,r:255,b:255},lineWidth:4}];function eO(e){var t;return{data:new eH.TimeSeries({}),...null!==(t=eG[e])&&void 0!==t?t:{}}}function eU(e){let{lines:t}=e,[n,r]=(0,_.useState)([eO(0)]),[o,l]=(0,_.useState)([]),[s,a]=(0,_.useState)(0),c=t.length;return(0,_.useEffect)(()=>{let e=c>=s?s:0;for(let i=e;i<c;i++)!function(e){let t=e.split(/[, \t]+/);if(!t.length)return;let i=0,s=0,a=n,c=o;for(let e of t){let{label:t,value:n}=function(e){if(e.includes(":")){let t=e.split(":"),n=parseFloat(t[1]);return{label:t[0],value:n}}{let t=parseFloat(e);return isNaN(t)&&t?{label:e,value:t}:{value:t}}}(e);!isNaN(n)&&i<16&&(a[i]||(a=[...a,eO(i)]),a[i].data.append(new Date().getTime(),n),i++),t&&((c=[...c])[s]=t,s++)}a!==n&&r(a),c!==o&&l(c)}(t[i]);a(c)},[s,t,n,c,o]),(0,i.jsx)(eB(),{responsive:!0,nonRealtimeData:!0,tooltip:e=>{let{display:t,time:n,data:r}=e;return t?(0,i.jsxs)("div",{className:eR().tooltip,children:[(0,i.jsx)("strong",{children:new Date(n||0).toLocaleTimeString()}),r?(0,i.jsx)("ul",{children:r.map((e,t)=>{var n;return(0,i.jsxs)("li",{style:{color:e.series.options.strokeStyle},children:[null!==(n=o[t])&&void 0!==n?n:1+t,": ",e.value]},t)})}):(0,i.jsx)("div",{})]}):(0,i.jsx)("div",{})},containerStyle:{flex:1,position:"relative"},style:{height:"0",minHeight:"100%",width:"100%"},series:n})}var eK=n(8107),eV=n.n(eK);let eq=(0,_.forwardRef)(function(e,t){let{onInput:r,onLoaded:o,style:l,className:s,convertEol:a}=e,[c,d]=(0,_.useState)(),u=(0,_.useRef)(null),h=(0,_.useRef)(),p=(0,_.useRef)(o);return p.current=o,(0,_.useImperativeHandle)(t,()=>({write(e){null==c||c.write(new Uint8Array([e]))},writeln(e){null==c||c.writeln(e)}}),[c]),(0,_.useEffect)(()=>{let e=u.current;e&&(async()=>{var t;let{FitAddon:i,Terminal:r}=await Promise.all([n.e(6142),n.e(9180)]).then(n.bind(n,39180)),o=new r({});o.open(e);let l=new i;return o.loadAddon(l),h.current=l,l.fit(),d(o),null===(t=p.current)||void 0===t||t.call(p,o),()=>{o.dispose(),d(void 0)}})()},[]),(0,_.useEffect)(()=>{c&&(c.options.convertEol=a)},[a,c]),(0,_.useEffect)(()=>{let e=null==c?void 0:c.onData(e=>null==r?void 0:r(e));return()=>null==e?void 0:e.dispose()},[c,r]),eV()({ref:u,onResize:e=>{if(e.height){var t;null===(t=h.current)||void 0===t||t.fit()}}}),(0,i.jsx)("div",{ref:u,className:s,style:l})});function eX(e){let{onInput:t,convertEol:n}=e,r=(0,_.useContext)(eo.D),[o,l]=(0,_.useState)(null);return(0,_.useEffect)(()=>{if(o){let e=()=>{r.serial.bytesBuffer.length&&(o.write(new Uint8Array([...r.serial.bytesBuffer])),r.serial.bytesBuffer=[])};return e(),r.serial.listener=e,()=>{r.serial.listener=void 0}}},[o,r]),(0,i.jsx)(eq,{style:{flex:1},onInput:t,onLoaded:e=>{l(e)},convertEol:n})}function eQ(e){let{lines:t,buffer:n,convertEol:o,onInput:s,onClear:a,plotter:c,onTogglePlotter:d,terminal:u}=e,[h,p]=(0,_.useState)(!0),m=(0,_.useRef)(null),[x]=(0,_.useState)(function(){let e=(0,eI.N)().font;return e?{fontSize:e+"px"}:{}}());(0,_.useEffect)(()=>{h&&m.current&&(m.current.scrollTop=m.current.scrollHeight)},[t.length,n,h]);let g=t.length,f=(0,_.useMemo)(()=>t.join("\n")+(g?"\n":""),[t,g]);return u?(0,i.jsx)(eX,{onInput:s,convertEol:null!=o&&o}):(0,i.jsxs)("div",{className:eW().serialMonitor,children:[c?(0,i.jsx)("div",{className:eW().plotterContainer,children:(0,i.jsx)(eU,{lines:t})}):(0,i.jsx)("div",{className:eW().monitorContainer,children:(0,i.jsxs)("pre",{className:"notranslate",onScroll:e=>{let t=e.currentTarget,n=t.scrollHeight-t.scrollTop-t.clientHeight;n>32?p(!1):t.scrollTop>0&&n<1&&p(!0)},style:x,ref:m,children:[f,n]})}),(0,i.jsxs)("div",{className:eW().serialControls,children:[(0,i.jsx)("input",{className:eW().serialInput,onKeyPress:e=>{let t=e.target;"Enter"===e.key&&t instanceof HTMLInputElement&&(null==s||s(t.value),t.value="")}}),(0,i.jsx)("button",{title:"Serial plotter",onClick:d,className:(0,y.default)({[eW().active]:c}),children:(0,i.jsx)(l(),{path:r.Cst,size:1})}),(0,i.jsx)("button",{onClick:()=>p(!h),title:"Auto scroll",children:(0,i.jsx)(l(),{path:h?r.Wa1:r._86,size:1})}),(0,i.jsx)("button",{onClick:()=>null==a?void 0:a(),children:(0,i.jsx)(l(),{path:r.QGK,size:1})})]})]})}let e$=(0,ey.ZP)(eZ.Z)({height:"32px",minHeight:"32px"}),eY=(0,ey.ZP)(ek.Z)(e=>{let{}=e;return{height:36,minHeight:36}});function eJ(e){let{children:t,value:n,index:r}=e;return(0,i.jsx)(m.Z,{id:"simple-tabpanel-".concat(r),"aria-labelledby":"simple-tab-".concat(r),role:"tabpanel",sx:{flex:1,height:0,display:n==r?"flex":"none",flexDirection:"columnn"},children:t})}let e0=(0,Z.Pi)(e=>{let{diagram:t}=e,[n,r]=(0,_.useState)(0),o=(0,_.useContext)(eo.D),l=o.serial.terminalMode?e=>Math.max(1+17*Math.round(e/17),103):e=>Math.max(e,100),s=o.serial.terminalMode?"":t.serialLineEnding,a=o.paused&&o.debuggerEnabled,c=[];if(a&&(c.push({title:"Call Stack",content:(0,i.jsx)(eD,{})}),c.push({title:"Variables",content:(0,i.jsx)(eP,{})})),o.serial.show){var d;c.push({title:"Serial Monitor",content:(0,i.jsx)(eQ,{lines:o.serial.lines,buffer:o.serial.textBuffer,plotter:o.serial.showPlotter,terminal:o.serial.terminalMode,convertEol:null===(d=t.serialMonitor)||void 0===d?void 0:d.convertEol,onClear:()=>o.serial.clearSerial(),onInput:e=>o.feedSerial(e+s),onTogglePlotter:()=>o.serial.togglePlotter()})})}if(o.chipOutput.length&&c.push({title:"Chips console",content:(0,i.jsx)(eA,{lines:o.chipOutput,onClear:()=>o.clearChipOutput()})}),!c.length)return null;let u=Math.min(n,c.length-1);return(0,i.jsxs)(eN,{initialSize:200,constrain:l,children:[c.length>1&&(0,i.jsx)(e$,{value:n,onChange:(e,t)=>{r(t)},"aria-label":"Bottom tabs",sx:{background:"black"},children:c.map((e,t)=>(0,i.jsx)(eY,{label:e.title,id:"simple-tab-".concat(t),"aria-controls":"simple-tabpanel-".concat(t)},e.title))}),c.map((e,t)=>(0,i.jsx)(eJ,{value:u,index:t,children:e.content},e.title))]})});var e1=n(50657),e2=n(31425),e5=n(6514),e4=n(37645),e3=n(32675);class e8{openBuildFailedDialog(e){this.showBuildFailedDialog=!0,this.buildErrorMessage=e}closeBuildFailedDialog(){this.showBuildFailedDialog=!1}openGetHelpDialog(){this.showGetHelpDialog=!0}closeGetHelpDialog(){this.showGetHelpDialog=!1}constructor(){(0,z._)(this,"showBuildFailedDialog",!1),(0,z._)(this,"buildErrorMessage",""),(0,z._)(this,"showGetHelpDialog",!1),(0,eg.ky)(this,{},{autoBind:!0})}}let e6=(0,_.createContext)(new e8),e9=(0,eE.Z)(e4.Z)(e=>{let{theme:t}=e;return{background:"linear-gradient(180deg, ".concat(t.palette.primary.dark,", transparent)")}}),e7=(0,Z.Pi)(()=>{let{translate:e}=(0,D.q)("simulator.buildFailedDialog"),t=(0,_.useContext)(e6),n=(0,_.useContext)(er.x),r=(0,_.useContext)(N.r),o=(0,_.useContext)(en.St),l=(0,_.useMemo)(()=>(function(e){let t=Array.from(e.matchAll(/fatal error: ([\w.]+): No such file or directory\r?\n/g)),n=new Set;for(let e of t){let t=e3.yz[e[1]];t&&n.add(t)}let i=t.map(e=>e[1]).join(";");return i.length>0&&(0,E.c)("getHelp:missingLibraries",{libraries:i,match:n.size>0}),Array.from(n)})(t.buildErrorMessage),[t.buildErrorMessage]);return(0,i.jsxs)(e1.Z,{open:t.showBuildFailedDialog,onClose:t.closeBuildFailedDialog,"aria-labelledby":"form-dialog-title",maxWidth:"md",children:[(0,i.jsx)(e9,{id:"form-dialog-title",children:e("title","Build failed!")}),(0,i.jsx)(e5.Z,{children:(0,i.jsx)("pre",{children:t.buildErrorMessage})}),(0,i.jsxs)(e2.Z,{children:[l.length>0?(0,i.jsx)(A.Z,{color:"primary",variant:"contained",onClick:()=>{var e;for(let e of((0,E.c)("getHelp:installLibraries",{project:null==n?void 0:n.id,owner:!!((null==n?void 0:n.owner)&&n.owner===(null==o?void 0:o.id))}),l))null==n||n.libraryManager.addLibrary(e);null===(e=r.switchToTab)||void 0===e||e.call(r,"Library Manager"),t.closeBuildFailedDialog()},children:l.length>1?"Install missing libraries":'Install "'.concat(l[0],'" library')}):(0,i.jsx)(A.Z,{color:"secondary",variant:"contained",onClick:()=>{(0,E.c)("getHelp:click",{project:null==n?void 0:n.id,owner:!!((null==n?void 0:n.owner)&&n.owner===(null==o?void 0:o.id))}),t.closeBuildFailedDialog(),t.openGetHelpDialog()},children:"Get help"}),(0,i.jsx)(A.Z,{variant:"contained",onClick:t.closeBuildFailedDialog,color:l.length?"inherit":void 0,children:"Close"})]})]})});var te=n(78726),tt=n(62026),tn=n(90629),ti=n(88085);let tr=(0,Z.Pi)(()=>{let e=(0,_.useContext)(eo.D),t=(0,_.useContext)(en.St);return e.buildTime<1e3?null:(0,i.jsx)(m.Z,{children:(0,i.jsxs)(tn.Z,{children:[(0,i.jsx)(m.Z,{color:{background:"#555",color:"white"},p:1,py:.5,children:(0,i.jsxs)(ti.Z,{direction:"row",spacing:1,alignItems:"center",children:[(0,i.jsx)(W.Z,{sx:{flex:1},children:"Compiling project..."}),(0,i.jsxs)(W.Z,{color:"#ccc",children:[(0,i.jsx)(te.Z,{sx:{verticalAlign:"top"}}),(e.buildTime/1e3).toFixed(2),"s"]}),(0,i.jsx)(A.Z,{onClick:()=>{e.abortBuild(),(0,E.c)("build:cancel",{waitTime:e.buildTime})},color:"warning",children:"Cancel"})]})}),t.machineId?(0,i.jsx)(m.Z,{p:1,children:(0,i.jsxs)(W.Z,{children:[(0,i.jsx)(tt.Z,{color:"success",sx:{verticalAlign:"bottom"}})," Wokwi Private Build Server enabled"]})}):(0,i.jsxs)(m.Z,{p:1,children:[(0,i.jsx)(W.Z,{gutterBottom:!0,children:"While waiting, why not check out Wokwi for VS Code?"}),(0,i.jsx)(A.Z,{variant:"contained",href:"https://docs.wokwi.com/vscode/getting-started",target:"_blank",onClick:()=>{(0,E.c)("compiling:vsCodeClick",{waitTime:e.buildTime})},children:"Learn more"})]})]})})});var to=n(93946);let tl=(0,Z.Pi)(()=>{let{translate:e}=(0,D.q)("simulator.getHelpDialog"),t=(0,_.useContext)(e6),n=(0,_.useContext)(en.St),o=(0,_.useContext)(er.x),s=(0,_.useRef)(null),a=(null==o?void 0:o.owner)&&o.owner===(null==n?void 0:n.id),c=!(null==o?void 0:o.id),d=["**Project Link:** https://wokwi.com/projects/".concat(null==o?void 0:o.id,"?gh=1"),"","Error message: ".concat(t.buildErrorMessage)].join("\n");return(0,i.jsxs)(e1.Z,{open:t.showGetHelpDialog,onClose:t.closeGetHelpDialog,"aria-labelledby":"form-dialog-title",maxWidth:"sm",children:[(0,i.jsx)(e4.Z,{id:"form-dialog-title",children:e("title","Get Help")}),(0,i.jsxs)(e5.Z,{children:[(0,i.jsxs)(W.Z,{gutterBottom:!0,children:["To get help, please join our"," ",(0,i.jsx)("a",{href:"https://wokwi.com/discord",target:"_blank",rel:"noopener noreferrer",children:"Discord Community Chat"}),", and ask for help in the ",(0,i.jsx)("b",{children:"#questions"})," channel."]}),c||!a&&o.modified?(0,i.jsxs)(W.Z,{gutterBottom:!0,children:["Important: make sure to ",(0,i.jsx)("b",{children:"save"})," the project first, and ",(0,i.jsx)("b",{children:"share the project link"})," ","along with your question."]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(W.Z,{gutterBottom:!0,children:["Include the following information:",(0,i.jsx)(x.Z,{title:e("copyToClipboard","Copy to clipboard"),children:(0,i.jsx)(to.Z,{onClick:e=>{var t;null===(t=s.current)||void 0===t||t.select(),document.execCommand("copy"),e.target.focus(),(0,E.c)("getHelp:copyToClipboard",{project:null==o?void 0:o.id})},sx:{verticalAlign:"sub"},children:(0,i.jsx)(l(),{path:r._U3,size:1})})})]}),(0,i.jsx)("textarea",{style:{width:"100%",background:"#ccc"},readOnly:!0,value:d,rows:8,ref:s,onClick:()=>{var e;return null===(e=s.current)||void 0===e?void 0:e.select()}}),o.modified&&(0,i.jsxs)(W.Z,{children:["Important: make sure to ",(0,i.jsx)("b",{children:"save"})," your project first!"]})]})]}),(0,i.jsx)(e2.Z,{children:(0,i.jsx)(A.Z,{variant:"contained",onClick:t.closeGetHelpDialog,children:"Close"})})]})});var ts=n(64704);let ta=(0,Z.Pi)(()=>{let{translate:e}=(0,D.q)("simulator.downloadingDataDialog"),t=(0,_.useContext)(eo.D),n=(0,er.P)(),r=0,o=0;for(let e of n.sdCardFiles)r+=e.size,o=e.downloading?e.progress*e.size:e.size;r||(r=1,o=1);let l=o/r*100;return(0,i.jsxs)(e1.Z,{open:t.showSDCardDownload,onClose:()=>t.skipSDCardDownload(),"aria-labelledby":"form-dialog-title",maxWidth:"md",children:[(0,i.jsx)(e4.Z,{id:"form-dialog-title",children:e("title","Downloading SD Card Data...")}),(0,i.jsx)(e5.Z,{children:(0,i.jsx)(ts.y,{value:l})}),(0,i.jsx)(e2.Z,{children:(0,i.jsx)(A.Z,{variant:"contained",onClick:()=>t.skipSDCardDownload(),children:"Skip"})})]})});var tc=n(20154);function td(e){let{src:t}=e,n=(0,_.useContext)(eo.D),[r,o]=(0,_.useState)(!1),l=(0,_.useRef)(null),[s,a]=(0,_.useState)(null);return(0,_.useEffect)(()=>(0,eg.EH)(()=>{let e=n.lastUpdate;if(r&&Object.keys(e).length){var t,i;null===(t=s||(null===(i=l.current)||void 0===i?void 0:i.contentWindow))||void 0===t||t.postMessage({$nanos:n.lastUpdateNanos,...(0,eg.ZN)(e)},"*")}})),(0,tc.m)("message",e=>{let t=e.data;if((null==t?void 0:t.app)==="wokwi"&&"listen"===t.command){var n;o(!0),(null===(n=e.source)||void 0===n?void 0:n.postMessage)&&a(e.source)}}),(0,i.jsx)("iframe",{ref:l,src:t,style:{border:"none",flex:"1"},allow:"fullscreen; microphone; midi; usb; autoplay; camera; accelerometer"})}var tu=n(20292),th=n.n(tu),tp=n(36363),tm=n(54588),tx=n(49176),tg=n(52149),tf=n(39702),tj=n(19620),tv=n(89055),tw=n(26447),tb=n(99319),ty=n(23328);function tZ(){return(0,i.jsxs)("svg",{version:"1.1",id:"wifi",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:"42px",height:"42px",viewBox:"0 0 20 20",children:[(0,i.jsx)("path",{d:"M9.9,5C6.8,5,4,6.4,2.2,8.7l1.1,1.1c1.6-2,4-3.2,6.7-3.2c2.7,0,5.1,1.3,6.7,3.2l1.1-1.1   C15.8,6.4,13,5,9.9,5z",children:(0,i.jsx)("animate",{id:"four",attributeName:"fill",dur:"400ms",values:"rgb(20, 97, 188)",calcMode:"linear",begin:"three.begin+0.2s"})}),(0,i.jsx)("path",{id:"wifi2",d:"M9.9,8c-2.3,0-4.3,1.1-5.6,2.8l1.1,1.1c1-1.4,2.6-2.4,4.5-2.4c1.9,0,3.5,0.9,4.5,2.4l1.1-1.1   C14.2,9.1,12.2,8,9.9,8z",children:(0,i.jsx)("animate",{id:"three",attributeName:"fill",dur:"600ms",values:"rgb(20, 97, 188)",calcMode:"linear",begin:"two.begin+0.2s"})}),(0,i.jsx)("path",{id:"wifi1",d:"M9.9,11c-1.5,0-2.7,0.8-3.4,2l1.1,1.1c0.4-0.9,1.3-1.6,2.3-1.6s2,0.7,2.3,1.6l1.1-1.1   C12.6,11.8,11.4,11,9.9,11z",children:(0,i.jsx)("animate",{id:"two",attributeName:"fill",dur:"800ms",values:"rgb(20, 97, 188)",calcMode:"linear",begin:"one.begin+0.2s"})}),(0,i.jsx)("circle",{id:"dot",fill:"black",cx:"9.9",cy:"15.3",r:"1",children:(0,i.jsx)("animate",{id:"one",attributeName:"fill",dur:"1000ms",values:"rgb(20, 97, 188)",calcMode:"linear",begin:"0;four.end+0.1s"})})]})}function tk(e){let{children:t}=e;return(0,i.jsxs)(tw.Z,{direction:"row",marginTop:1,marginBottom:1,spacing:.5,alignItems:"center",component:"li",children:[(0,i.jsx)(tt.Z,{color:"success"}),(0,i.jsx)(W.Z,{children:t})]})}let tC=(0,Z.Pi)(e=>{let{show:t,onHide:n}=e;return(0,i.jsxs)(e1.Z,{open:t,onClose:n,"aria-labelledby":"form-dialog-title",maxWidth:"md",children:[(0,i.jsx)(e4.Z,{id:"form-dialog-title",children:"Private IoT Gateway Upgrade: Private & Powerful"}),(0,i.jsxs)(e5.Z,{children:[(0,i.jsx)(W.Z,{gutterBottom:!0,children:"Elevate your projects with Wokwi Club's enhanced WiFi simulation."}),(0,i.jsx)(W.Z,{gutterBottom:!0,children:"Key enhancements include:"}),(0,i.jsxs)("ul",{style:{padding:0},children:[(0,i.jsx)(tk,{children:"Seamless connection to both local and internet devices"}),(0,i.jsx)(tk,{children:"Host your own HTTP server on the simulated ESP32"}),(0,i.jsx)(tk,{children:"Enjoy faster, more reliable internet connectivity"}),(0,i.jsx)(tk,{children:"Enhanced privacy"})]})]}),(0,i.jsxs)(e2.Z,{children:[(0,i.jsx)(A.Z,{variant:"outlined",onClick:n,sx:{margin:1},children:"Close"}),(0,i.jsx)(A.Z,{variant:"contained",href:"/club?ref=iotgateway",target:"_blank",children:"Learn more"})]})]})}),t_=e=>{let{status:t}=e;switch(t.state){case ty.w.Connecting:return(0,i.jsx)(tZ,{});case ty.w.Connected:return["private","vscode"].includes(t.gatewayType)?(0,i.jsx)(tp.Z,{}):(0,i.jsx)(tm.Z,{});case ty.w.AccessPointNotFound:case ty.w.GatewayError:return(0,i.jsx)(tx.Z,{});default:return(0,i.jsx)("span",{})}};function tS(e){return e<1024?"".concat(e," B"):e<10188.8?"".concat((e/1024).toFixed(1)," KB"):e<1048576?"".concat(Math.round(e/1024)," KB"):e<10433331.2?"".concat((e/1048576).toFixed(1)," MB"):"".concat(Math.round(e/1048576)," MB")}let tD=(0,Z.Pi)(()=>{let e=(0,S.a)(),t=(0,_.useContext)(eo.D),{wifi:n}=t,[r,o]=(0,_.useState)(!1),l=(0,_.useRef)(null),[s,a]=(0,_.useState)(!1);if(!n)return null;let c=n.status.state;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(x.Z,{title:function(e){switch(null==e?void 0:e.state){case ty.w.Connecting:return"Connecting to WiFi...";case ty.w.Connected:if("private"===e.gatewayType||"vscode"===e.gatewayType)return"WiFi: Connected to ".concat(e.ssid," (Private IoT Gateway)");return"WiFi: Connected to ".concat(e.ssid," (Public IoT Gateway)");case ty.w.AccessPointNotFound:return'WiFi Error: Access point not found. Use "Wokwi-GUEST" without a password.';case ty.w.GatewayError:return"WiFi Error: ".concat(e.errorMessage);default:return"WiFi: Unknown state"}}(n.status),children:(0,i.jsx)(g.Z,{size:"small",sx:{boxShadow:0,background:"transparent"},ref:l,onClick:()=>{o(!0)},children:(0,i.jsx)(t_,{status:n.status})})}),(0,i.jsx)(f.ZP,{open:r,anchorEl:l.current,onClose:()=>o(!1),anchorOrigin:{vertical:"bottom",horizontal:"left"},children:(0,i.jsxs)($.Z,{children:[(0,i.jsxs)(tw.Z,{px:2,direction:"row",spacing:1,mb:1,py:1,style:{background:"#555"},children:[(0,i.jsxs)(tw.Z,{direction:"row",alignItems:"center",children:[(0,i.jsx)(tg.Z,{fontSize:"small"}),(0,i.jsx)(W.Z,{children:tS(n.status.txBytes)})]}),(0,i.jsxs)(tw.Z,{direction:"row",alignItems:"center",children:[(0,i.jsx)(tf.Z,{fontSize:"small"}),(0,i.jsxs)(W.Z,{children:[" ",tS(n.status.rxBytes)]})]}),c===ty.w.Connected&&["private","vscode"].includes(n.status.gatewayType)&&(0,i.jsxs)(tw.Z,{direction:"row",alignItems:"center",spacing:.5,children:[(0,i.jsx)(tj.Z,{fontSize:"small"}),(0,i.jsx)(W.Z,{children:"Private"})]}),c===ty.w.Connected&&"public"===n.status.gatewayType&&(0,i.jsxs)(tw.Z,{direction:"row",alignItems:"center",spacing:.5,children:[(0,i.jsx)(tv.Z,{fontSize:"small"}),(0,i.jsx)(W.Z,{children:"Public"})]}),c===ty.w.GatewayError&&(0,i.jsxs)(tw.Z,{direction:"row",alignItems:"center",spacing:.5,children:[(0,i.jsx)(tx.Z,{fontSize:"small"}),(0,i.jsx)(W.Z,{children:"Error"})]})]}),"vscode"==n.status.gatewayType&&(0,i.jsxs)(Y.Z,{onClick:()=>{var e;null===(e=t.wifi)||void 0===e||e.medium.downloadPcap(),o(!1)},children:[(0,i.jsx)(J.Z,{children:(0,i.jsx)(tf.Z,{})}),(0,i.jsx)(ee.Z,{children:"Download PCAP file"})]}),"vscode"!==n.status.gatewayType&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(tw.Z,{px:2,mb:1,children:n.status.privateGateway?(0,i.jsx)(A.Z,{onClick:()=>{n.status.setPrivateGateway(!1),alert("Private IoT Gateway disabled! Please restart the simulation to apply changes.")},children:"Disable Private Gateway"}):(0,i.jsx)(A.Z,{variant:"contained",onClick:()=>{if(!(0,tb.Wl)(e)){a(!0);return}n.status.setPrivateGateway(!0),alert("Private IoT Gateway enabled! Please restart the simulation to apply changes.")},children:"Enable Private Gateway"})}),(0,i.jsx)(et.Z,{}),(0,i.jsxs)(Y.Z,{onClick:()=>{var e;null===(e=t.wifi)||void 0===e||e.medium.downloadPcap(),o(!1)},children:[(0,i.jsx)(J.Z,{children:(0,i.jsx)(tf.Z,{})}),(0,i.jsx)(ee.Z,{children:"Download PCAP file"})]}),(0,i.jsxs)(Y.Z,{component:"a",href:"https://docs.wokwi.com/guides/esp32-wifi",target:"_blank",children:[(0,i.jsx)(J.Z,{children:(0,i.jsx)(Q.Z,{})}),(0,i.jsx)(ee.Z,{children:"WiFi Documentation"})]})]})]})}),(0,i.jsx)(tC,{show:s,onHide:()=>a(!1)})]})});var tP=n(94054),tE=n(40476),tM=n(68061),tT=n(50480),tN=n(36872),tF=n(61903),tI=n(93578);let tz=/^[a-z0-9-]+$/,tW={c:"c",rust:"rs",verilog:"v"},tA=(0,Z.Pi)(()=>{let[e,t]=(0,_.useState)(""),[n,r]=(0,_.useState)("c"),[o,l]=(0,_.useState)(null),s=(0,_.useContext)(ej),a=(0,_.useContext)(N.r),c=(0,S.a)(),d=(0,er.P)(),u=()=>{t(""),r("c"),l(null),s.close()},h=()=>{var t;if(!e||null!=o)return;let i=tW[n],r=null!==(t=c.displayName)&&void 0!==t?t:"Author name",l="".concat(e,".chip.json");d.addFile(l,JSON.stringify({name:e,author:r,pins:["VCC","GND","IN","OUT"],controls:[]},null,2)),d.addFile("".concat(e,".chip.").concat(i),tI.A[n].replace("Author Name",r));let{diagram:h}=d;h&&(h.addPartFromTemplate({type:"chip-".concat(e),prefix:"chip",attrs:[]},s.chipPosition),d.syncDiagram(),setTimeout(()=>{var e;null===(e=a.switchToTab)||void 0===e||e.call(a,l)})),u()};return(0,i.jsx)(e1.Z,{open:s.isOpen,onClose:u,"aria-labelledby":"custom-chip-dialog-title",maxWidth:"xs",children:(0,i.jsxs)("form",{onSubmit:e=>{h(),e.preventDefault()},children:[(0,i.jsx)(e4.Z,{id:"custom-chip-dialog-title",children:"Create a Custom Chip"}),(0,i.jsx)(e5.Z,{sx:{minHeight:"96px"},children:(0,i.jsxs)(tw.Z,{spacing:2,children:[(0,i.jsx)(tP.Z,{children:(0,i.jsx)(tF.Z,{autoFocus:!0,margin:"dense",label:"Chip name (e.g. lcd-controller)",value:e,sx:{width:"300px"},required:!0,onChange:e=>{let{value:n}=e.target;t(n),n&&l(tz.test(n)?d.chipExists(n)?"A chip with this name already exists in the project.":null:"Chip name can only contain lowercase letters, numbers and dashes.")},error:null!=o,helperText:o})}),(0,i.jsxs)(tP.Z,{children:[(0,i.jsx)(tE.Z,{id:"language-radio-group",children:"Language"}),(0,i.jsxs)(tM.Z,{"aria-labelledby":"language-radio-group",value:n,onChange:(e,t)=>r(t),children:[(0,i.jsx)(tT.Z,{value:"c",control:(0,i.jsx)(tN.Z,{}),label:"C (recommended)"}),(0,i.jsx)(tT.Z,{value:"rust",control:(0,i.jsx)(tN.Z,{}),label:"Rust (alpha)"}),(0,i.jsx)(tT.Z,{value:"verilog",control:(0,i.jsx)(tN.Z,{}),label:"Verilog (alpha)"})]})]})]})}),(0,i.jsxs)(e2.Z,{children:[(0,i.jsx)(A.Z,{onClick:u,children:"Cancel"}),(0,i.jsx)(A.Z,{onClick:h,color:"primary",variant:"contained",disabled:!e||null!=o,children:"Create Chip"})]})]})})}),tH=C()(()=>n.e(7080).then(n.bind(n,47080)),{loadableGenerated:{webpack:()=>[47080]}}),tB=(0,Z.Pi)(e=>{let{diagram:t,files:n,className:o,disableEdit:Z}=e,k=(0,_.useContext)(N.r),C=(0,_.useContext)(eo.D),[z,W]=(0,_.useState)(!1),A=(0,_.useRef)(null),[B,L]=(0,_.useState)(!1),R=(0,_.useRef)(null),G=(0,er.P)(),O=(0,S.a)(),U=(0,P.A)(),K=(0,_.useContext)(I.A),V=(0,_.useContext)(e6),{translate:q}=(0,D.q)("simulator.main"),X=(0,_.useCallback)(()=>G.syncDiagram(),[G]);C.onBuildFailure=e=>{var t,i,r;let o=null!==(r=null===(t=n.find(e=>"sketch"===(0,T.r5)(e.name)))||void 0===t?void 0:t.name)&&void 0!==r?r:"sketch.ino";(0,E.L)({category:"build",action:"build_failure"}),(0,E.c)("build:failure",{project:G.id,modified:G.modified}),null===(i=k.goToError)||void 0===i||i.call(k),V.openBuildFailedDialog((0,M.GS)(e,o))};let Q={background:j.Z[600],color:"white","&:hover":{background:j.Z[700]}},$={background:v.Z[800],color:"white","&:hover":{background:v.Z[900]}},Y=C.running?q("restart","Restart the simulation"):q("start","Start the simulation"),J=C.paused?q("resume","Resume"):q("pause","Pause");return(0,i.jsxs)("div",{className:(0,y.default)(th().container,{[th().darkMode]:U.dark,[th().fullscreen]:K.fullScreen},o),onKeyDown:e=>{C.running||"A"!==e.key.toUpperCase()||z||(W(!0),e.preventDefault(),e.stopPropagation()),e.altKey&&"Enter"===e.key&&K.toggleFullScreen()},children:[(0,i.jsxs)("div",{onKeyDown:e=>e.stopPropagation(),children:[(0,i.jsx)(ta,{}),(0,i.jsx)(e7,{}),(0,i.jsx)(tl,{}),(0,i.jsx)(tA,{})]}),(0,i.jsxs)("div",{className:th().simulationControls,children:[(0,i.jsx)(m.Z,{m:1,children:(0,i.jsx)(x.Z,{title:Y,children:(0,i.jsx)(g.Z,{onClick:()=>{if(e.onStart){e.onStart();return}let i=C.running;C.start({files:n,chips:G.chips,binaryFiles:G.binaryFiles,diagram:t,sdCardFiles:G.sdCardFiles,projectId:G.id,tempProjectId:G.tempId,userId:O.id,machineId:O.machineId,debugger:i&&C.debuggerEnabled})},"aria-label":Y,size:"small",sx:{backgroundColor:w.Z[600],color:"white","&:hover":{backgroundColor:w.Z[700]}},children:C.running?(0,i.jsx)(s.Z,{}):(0,i.jsx)(a.Z,{})})})}),e.showEditButton&&(0,i.jsx)(m.Z,{my:1,mr:1,children:(0,i.jsx)(x.Z,{title:q("editDiagram","Edit diagram"),children:(0,i.jsx)(g.Z,{onClick:()=>{var t;return null===(t=e.onEditDiagramClick)||void 0===t?void 0:t.call(e)},"aria-label":q("editDiagram","Edit diagram"),size:"small",sx:$,children:(0,i.jsx)(c.Z,{})})})}),(0,i.jsxs)(m.Z,{my:1,mr:1,children:[!C.running&&!C.building&&!Z&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(x.Z,{title:q("addNewPart","Add a new part"),children:(0,i.jsx)(g.Z,{ref:A,onClick:()=>W(e=>!e),"aria-label":q("addNewPart","Add a new part"),size:"small",sx:$,children:(0,i.jsx)(d.Z,{})})}),(0,i.jsx)(f.ZP,{open:z,anchorEl:A.current,onClose:()=>W(!1),onClick:()=>W(!1),onKeyDown:e=>{"Enter"===e.key&&(W(!1),e.stopPropagation())},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:(0,i.jsx)(eb,{})})]}),C.building&&(0,i.jsx)(l(),{path:r.CEZ,size:.8,spin:!0}),C.building&&(0,i.jsx)(tr,{}),C.running&&(0,i.jsx)(x.Z,{title:q("stopSimulation","Stop the simulation"),children:(0,i.jsx)(g.Z,{onClick:()=>C.stop(),"aria-label":q("stopSimulation","Stop the simulation"),sx:Q,size:"small",children:(0,i.jsx)(u.Z,{})})})]}),!C.running&&!C.building&&!Z&&(0,i.jsxs)(m.Z,{my:1,mr:1,children:[(0,i.jsx)(x.Z,{title:q("zoomGridTooltip","Zoom, Grid, and more"),children:(0,i.jsx)(g.Z,{ref:R,onClick:()=>L(e=>!e),"aria-label":q("zoomGridTooltip","Zoom, grid, and more"),sx:Q,size:"small",children:(0,i.jsx)(h.Z,{})})}),(0,i.jsx)(f.ZP,{open:B,anchorEl:R.current,onClose:()=>L(!1),anchorOrigin:{vertical:"bottom",horizontal:"left"},children:(0,i.jsx)(el,{onClose:()=>L(!1)})})]}),C.running&&(0,i.jsx)(m.Z,{my:1,mr:1,children:(0,i.jsx)(x.Z,{title:J,children:(0,i.jsx)(g.Z,{onClick:()=>{C.paused?C.resume():C.pause()},"aria-label":J,size:"small",sx:C.paused?{background:b.Z[500],color:"#333","&:hover":{background:b.Z[600]}}:Q,children:C.paused?(0,i.jsx)(a.Z,{}):(0,i.jsx)(p.Z,{})})})}),C.wifi&&C.wifi.status.state!==ty.w.Disconnected&&(0,i.jsx)(m.Z,{my:1,mr:1,children:(0,i.jsx)(tD,{})})]}),C.running&&(0,i.jsxs)("span",{className:th().simulationStatus,children:[(0,i.jsx)(l(),{path:r.clR,size:1}),(0,i.jsx)("span",{className:th().timeText,ref:e=>{C.timeElement=e}}),(0,i.jsx)(l(),{path:r.YLv,size:1}),(0,i.jsx)("span",{className:th().speedText,ref:e=>{C.speedElement=e}})]}),t.customView?(0,i.jsx)(td,{src:t.customView}):(0,i.jsx)(H,{children:(0,i.jsx)(F.Z,{diagram:t,editMode:!C.running&&!Z,onDiagramUpdated:X,marginTop:56})}),(0,i.jsx)(e0,{diagram:t}),t.ercEnabled&&!C.running&&(0,i.jsx)("div",{className:th().ercBox,children:(0,i.jsx)("div",{children:(0,i.jsx)(tH,{})})})]})})},52178:function(e,t,n){"use strict";n.d(t,{BX:function(){return u},OK:function(){return h},mQ:function(){return p}});var i=n(85893),r=n(55317),o=n(8849),l=n.n(o),s=n(86010),a=n(67294),c=n(40144),d=n.n(c);let u=(0,a.forwardRef)((e,t)=>{let{active:n,...o}=e;return(0,i.jsx)("button",{...o,className:(0,s.default)(d().dropdown,n&&d().active),ref:t,children:(0,i.jsx)(l(),{path:r.iW9,size:"20px"})})});function h(e){let{children:t,active:n,modified:r,errors:o,readonly:l,...a}=e;return(0,i.jsx)("button",{...a,className:(0,s.default)(d().tab,{[d().active]:n,[d().modified]:r,[d().errors]:o,[d().readonly]:l}),children:t})}function p(e){let{children:t}=e;return(0,i.jsx)("div",{className:d().tabs,children:t})}u.displayName="DropdownTab"},20154:function(e,t,n){"use strict";n.d(t,{m:function(){return r}});var i=n(67294);function r(e,t){(0,i.useEffect)(()=>(window.addEventListener(e,t),()=>window.removeEventListener(e,t)),[e,t])}},93578:function(e,t,n){"use strict";n.d(t,{A:function(){return i}});let i={c:'// Wokwi Custom Chip - For docs and examples see:\n// https://docs.wokwi.com/chips-api/getting-started\n//\n// SPDX-License-Identifier: MIT\n// Copyright 2023 Author Name\n\n#include "wokwi-api.h"\n#include <stdio.h>\n#include <stdlib.h>\n\ntypedef struct {\n  // TODO: Put your chip variables here\n} chip_state_t;\n\nvoid chip_init() {\n  chip_state_t *chip = malloc(sizeof(chip_state_t));\n\n  // TODO: Initialize the chip, set up IO pins, create timers, etc.\n\n  printf("Hello from custom chip!\\n");\n}\n',rust:'// Wokwi Custom Chip - For docs and examples see:\n// https://docs.wokwi.com/chips-api/getting-started\n//\n// SPDX-License-Identifier: MIT\n// Copyright 2023 Author Name\n\nuse std::ffi::{CString};\n\nuse wokwi_chip_ll::{\n    debugPrint, pinInit, pinWatch, pinWrite, INPUT, OUTPUT, HIGH, LOW,\n};\n\nstruct Chip {\n    // Store your chip state here\n}\n\n// chipInit() will be called once per chip instance. We use CHIP_VEC to keep track of all the instance.\nstatic mut CHIP_VEC: Vec<Chip> = Vec::new();\n\n#[no_mangle]\npub unsafe extern "C" fn chipInit() {\n    let chip = Chip {\n        // Set initial values as needed\n    };\n    CHIP_VEC.push(chip);\n    let chip = CHIP_VEC.last().unwrap();\n\n    // TODO: Initialize the chip, set up IO pins, create timers, etc.\n\n    debugPrint(CString::new("Hello Rust Chip!").unwrap().into_raw());\n}\n',verilog:"// Wokwi Custom Chip - For docs and examples see:\n// https://docs.wokwi.com/chips-api/getting-started\n//\n// SPDX-License-Identifier: MIT\n// Copyright 2023 Author Name\n\n// Input / output names must match the pins defined in the chip's JSON file:\nmodule wokwi (\n  input wire IN,\n  output wire OUT\n  );\n\n  // put your logic here, e.g.:\n  assign OUT = ~IN;\n\nendmodule",i2c:'// Wokwi Custom Chip - For information and examples see:\n// https://docs.wokwi.com/chips-api/getting-started\n//\n// SPDX-License-Identifier: MIT\n// Copyright (C) 2022 Uri Shaked / wokwi.com\n\n#include "wokwi-api.h"\n#include <stdio.h>\n#include <stdlib.h>\n\nconst int ADDRESS = 0x22;\n\ntypedef struct {\n  pin_t pin_int;\n  uint8_t counter;\n  uint32_t threshold_attr;\n} chip_state_t;\n\nstatic bool on_i2c_connect(void *user_data, uint32_t address, bool connect);\nstatic uint8_t on_i2c_read(void *user_data);\nstatic bool on_i2c_write(void *user_data, uint8_t data);\nstatic void on_i2c_disconnect(void *user_data);\n\nvoid chip_init() {\n  chip_state_t *chip = malloc(sizeof(chip_state_t));\n\n  chip->pin_int = pin_init("INT", INPUT);\n  chip->counter = 0;\n\n  const i2c_config_t i2c_config = {\n    .user_data = chip,\n    .address = ADDRESS,\n    .scl = pin_init("SCL", INPUT),\n    .sda = pin_init("SDA", INPUT),\n    .connect = on_i2c_connect,\n    .read = on_i2c_read,\n    .write = on_i2c_write,\n    .disconnect = on_i2c_disconnect, // Optional\n  };\n  i2c_init(&i2c_config);\n\n  // This attribute can be edited by the user. It\'s defined in wokwi-custom-part.json:\n  chip->threshold_attr = attr_init("threshold", 127);\n\n  // The following message will appear in the browser\'s DevTools console:\n  printf("Hello from custom chip!\\n");\n}\n\nstatic void counter_updated(chip_state_t *chip) {\n  const uint32_t threshold = attr_read(chip->threshold_attr);\n  if (chip->counter > threshold) {\n    pin_write(chip->pin_int, LOW);\n    pin_mode(chip->pin_int, OUTPUT);\n  } else {\n    pin_mode(chip->pin_int, INPUT);\n  }\n}\n\nbool on_i2c_connect(void *user_data, uint32_t address, bool connect) {\n  return true; /* Ack */\n}\n\nuint8_t on_i2c_read(void *user_data) {\n  chip_state_t *chip = user_data;\n  chip->counter++;\n  counter_updated(chip);\n  return chip->counter;\n}\n\nbool on_i2c_write(void *user_data, uint8_t data) {\n  chip_state_t *chip = user_data;\n  chip->counter = data;\n  counter_updated(chip);\n  return true; // Ack\n}\n\nvoid on_i2c_disconnect(void *user_data) {\n  // Do nothing\n}'}},58943:function(e,t,n){"use strict";function i(e){return e.split(" ").map((e,t)=>0===t?e.toLowerCase():e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join("")}function r(e){return e.split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(" ")}n.d(t,{L:function(){return r},z:function(){return i}})},66699:function(e){e.exports={wrapper:"code-editor_wrapper__S_Mle",sourceCodePreview:"code-editor_sourceCodePreview__6fM3n",dark:"code-editor_dark__ZkoUs",editorContainer:"code-editor_editorContainer__hSbk1",disableAutocomplete:"code-editor_disableAutocomplete__iknrz"}},95582:function(e){e.exports={breakpoint:"editor-breakpoints_breakpoint__o0tVD",stackframe:"editor-breakpoints_stackframe__L8b4K",hint:"editor-breakpoints_hint__Fjmtl",stackframeLine:"editor-breakpoints_stackframeLine__gaz3o"}},1348:function(e){e.exports={serialMonitor:"serial-monitor_serialMonitor__QobyT",monitorContainer:"serial-monitor_monitorContainer__L2dnu",plotterContainer:"serial-monitor_plotterContainer__ZUti8",serialControls:"serial-monitor_serialControls__ZApdN",active:"serial-monitor_active__rGHsx"}},47142:function(e){e.exports={tooltip:"serial-plotter_tooltip__jgHD5"}},20292:function(e){e.exports={container:"simulation_container___BvyD",darkMode:"simulation_darkMode__Bnd9o",fullscreen:"simulation_fullscreen__V9ZtP",simulationControls:"simulation_simulationControls__Jqtsp",timeText:"simulation_timeText__tR870",speedText:"simulation_speedText__ecbqm",simulationStatus:"simulation_simulationStatus__lDBTR",ercBox:"simulation_ercBox__mVDuI"}},40144:function(e){e.exports={tabs:"tabs_tabs__0p32m",tab:"tabs_tab__iUAy8",active:"tabs_active__IguNq",modified:"tabs_modified__0O7Qp",errors:"tabs_errors__scWEl",readonly:"tabs_readonly__r2uqP",dropdown:"tabs_dropdown__6PGPX"}}}]);